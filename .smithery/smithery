#!/usr/bin/env sh
set -euo pipefail

# Smithery default startup script calls `smithery start`
if [ "${1:-}" = "start" ]; then
  shift
fi

if [ -x "/app/.venv/bin/mcp" ]; then
  exec /app/.venv/bin/mcp http src/mcp_optimizer/server.py --host 0.0.0.0 --port 3333 --cors "*" "$@"
fi

exec mcp http src/mcp_optimizer/server.py --host 0.0.0.0 --port 3333 --cors "*" "$@"
